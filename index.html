<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‘ë¦¬ì™€ ì •ë³´ ì±—ì°½</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nanum+Pen+Script&family=BM+DOHYEON&family=BM+JUA&family=BM+HANNA+11yrs&family=Cafe24+Surround&family=Nanum+Myeongjo&family=Yeon+Sung&family=Gugi&display=swap');
        @import url('https://fonts.googleapis.com/earlyaccess/notosanskr.css');

        body {
            font-family: "Noto Sans KR", sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f4f4f4;
            overflow: hidden;
            transition: background-color 0.3s, color 0.3s;
        }
        .chat-container {
            width: 80vw;
            height: 80vh;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 10px rgba(0,0,0,0.1);
            position: relative;
            display: flex;
            flex-direction: column;
            transition: background 0.3s, color 0.3s;
        }
        .chat-box {
            flex: 1;
            overflow-y: auto;
            border-bottom: 1px solid #ddd;
            margin-bottom: 10px;
            padding: 10px;
            position: relative;
        }
        .input-box {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
        }
        input[type="text"] {
            flex: 1;
            padding: 8px;
            margin-right: 5px;
        }
        input[type="color"] {
            width: 50px;
            padding: 0;
            margin-right: 5px;
        }
        button {
            padding: 8px;
            background: #E6FFF5; /* ì•„ì£¼ ì—°í•œ ë¯¼íŠ¸ìƒ‰ */
            color: #333;
            border: none;
            cursor: pointer;
            margin-left: 5px;
        }
        .message {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
            justify-content: space-between;
        }
        .message.user {
            background-color: #E6FFF5; /* ì•„ì£¼ ì—°í•œ ë¯¼íŠ¸ìƒ‰ */
            padding: 5px;
            border-radius: 5px;
        }
        .message.duri {
            background-color: #FFE6F0; /* ë‘ë¦¬ì˜ í•‘í¬ìƒ‰ ìœ ì§€ */
            padding: 5px;
            border-radius: 5px;
        }
        .message img, .message audio {
            max-width: 200px;
            max-height: 200px;
            margin-right: 10px;
        }
        .message-text {
            flex: 1;
        }
        .sender-label {
            font-weight: bold;
            margin-right: 10px;
        }
        .button-container {
            display: flex;
            gap: 5px;
        }
        /* ë‹¤í¬ ëª¨ë“œ ìŠ¤íƒ€ì¼ */
        .dark-mode {
            background-color: #333;
            color: white;
        }
        .dark-mode .chat-container {
            background: #444;
            border: 1px solid #555;
        }
        .dark-mode .chat-box {
            border-bottom: 1px solid #666;
        }
        .dark-mode button {
            background: #4CAF50; /* ë‹¤í¬ ëª¨ë“œì—ì„œë„ ë³´ì´ê²Œ ì—°í•œ ì´ˆë¡ */
            color: white;
        }
        .dark-mode .message.user {
            background-color: #2E7D32; /* ë‹¤í¬ ëª¨ë“œì—ì„œ ì¡°í™”ë¡œìš´ ë¯¼íŠ¸ ê³„ì—´ */
        }
        .dark-mode .message.duri {
            background-color: #6B3E4D;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-box" id="chatBox"></div>
        <div class="input-box">
            <input type="text" id="messageInput" placeholder="ë‘ë¦¬ì—ê²Œ ë¬¼ì–´ë´!">
            <input type="color" id="fontColor" value="#000000">
            <select id="fontSelect">
                <option value="Noto Sans KR">ë°”íƒ•ì²´ (Noto Sans KR)</option>
                <option value="Nanum Pen Script">ë‚˜ëˆ”ì†ê¸€ì”¨</option>
                <option value="BM JUA">ë°°ë‹¬ì˜ë¯¼ì¡± ì£¼ì•„</option>
                <option value="BM HANNA 11yrs">ë°°ë‹¬ì˜ë¯¼ì¡± í•œë‚˜ì²´</option>
                <option value="BM DOHYEON">ë°°ë‹¬ì˜ë¯¼ì¡± ë„í˜„</option>
                <option value="Cafe24 Surround">ì¹´í˜24 ì¨ë¼ìš´ë“œ</option>
                <option value="Nanum Myeongjo">ë‚˜ëˆ” ëª…ì¡°</option>
                <option value="Yeon Sung">ì—°ì„±ì²´</option>
                <option value="Gugi">êµ¬ê¸°ì²´</option>
            </select>
            <input type="number" id="fontSize" placeholder="í¬ê¸°" min="12" max="48" value="16">
            <button onclick="sendMessage()">ì „ì†¡</button>
            <button class="mode-toggle" onclick="toggleMode()">ë‹¤í¬ ëª¨ë“œ</button>
        </div>
    </div>
    <script>
        function loadMessages() {
            const messages = JSON.parse(localStorage.getItem("infoMessages")) || [];
            messages.forEach(msg => {
                displayMessage(msg.text, msg.font, msg.size, msg.color, msg.sender);
            });
        }

        function saveMessages() {
            const messages = [];
            document.querySelectorAll('.message').forEach(msgElement => {
                const text = msgElement.querySelector('.message-text').textContent;
                const font = msgElement.querySelector('.message-text').style.fontFamily;
                const size = msgElement.querySelector('.message-text').style.fontSize;
                const color = msgElement.querySelector('.message-text').style.color;
                const sender = msgElement.classList.contains('user') ? 'user' : 'duri';
                messages.push({ text, font, size, color, sender });
            });
            localStorage.setItem("infoMessages", JSON.stringify(messages));
        }

        function sendMessage() {
            let input = document.getElementById("messageInput");
            let chatBox = document.getElementById("chatBox");

            let message = input.value.trim();
            if (message === "") return;

            // ì‚¬ìš©ìì˜ ë©”ì‹œì§€ í‘œì‹œ
            displayMessage(message, document.getElementById("fontSelect").value, document.getElementById("fontSize").value + "px", document.getElementById("fontColor").value, "user");

            // ë‘ë¦¬ì˜ ìœ„ë¡œì™€ ì •ë³´ ì‘ë‹µ (ê¸€ì”¨ í¬ê¸° 28px)
            setTimeout(() => {
                const duriResponse = generateDuriResponse(message);
                displayMessage(duriResponse, "Nanum Pen Script", "28px", "#ff69b4", "duri");
            }, 500);

            input.value = "";
            chatBox.scrollTop = chatBox.scrollHeight;
            saveMessages();
        }

        function generateDuriResponse(userMessage) {
            // ìì—°ìŠ¤ëŸ½ê³  ê°œë³„ì ì¸ ìœ„ë¡œì™€ ì •ë³´ ì‘ë‹µ
            const currentDate = new Date().toLocaleString("ko-KR", { timeZone: "Asia/Seoul" });
            let response = "";

            if (userMessage.includes("í˜ë“¤ë‹¤") || userMessage.includes("ã… ã… ")) {
                response = "ì•„, ì¹œêµ¬... ë„ˆë¬´ í˜ë“¤ì—ˆêµ¬ë‚˜. ë‚˜ë‘ë¦¬ ì—¬ê¸° ìˆì–´ì¤„ê²Œ. ì ê¹ ì‰¬ê³ , í˜¹ì‹œ ë„ì›€ í•„ìš”í•˜ë©´ ë§í•´ì¤˜. ì§€ê¸ˆ ì‹œê°„ì€ " + currentDate + "ì•¼, ì¢€ ì‰´ê¹Œ? ğŸ¤—";
            } else if (userMessage.includes("ë˜‘ê°™ë‹¤")) {
                response = "ë¯¸ì•ˆí•´, ë˜‘ê°™ì•˜ë˜ ê±° ê°™ì•„. ì´ì œ ë‹¤ë¥´ê²Œ í• ê²Œ! ë­˜ ë¬¼ì–´ë³´ë©´ ë‚˜ë‘ë¦¬ê°€ ì°¾ì•„ì¤„ê²Œ. ì˜ˆë¥¼ ë“¤ì–´, ë‚ ì”¨ë‚˜ ë‰´ìŠ¤ ì–´ë•Œ? ğŸ˜„";
            } else if (userMessage.includes("ë‚ ì”¨")) {
                response = "ì˜¤, ë‚ ì”¨ ê¶ê¸ˆí•œ ê±°ì§€? 2025ë…„ 3ì›” 7ì¼ ê¸°ì¤€, í•œêµ­ì€ ë´„ì´ë¼ ë”°ëœ»í•´. ì„œìš¸ì€ ì•½ 15ë„ ì •ë„ì¼ ê±°ì•¼. ì§€ì—­ ë” ì•Œë ¤ì£¼ë©´ í™•ì¸í•´ë³¼ê¹Œ? ğŸ˜Š";
            } else if (userMessage.includes("ë‰´ìŠ¤")) {
                response = "ìµœì‹  ë‰´ìŠ¤? 2025ë…„ 3ì›” ì´ˆì— AI ê¸°ìˆ  ë°œì „ì´ í™”ì œì•¼. xAI ê°™ì€ íšŒì‚¬ê°€ ì£¼ëª©ë°›ê³  ìˆëŒ€. ë” ê¶ê¸ˆí•œ ê±° ìˆìœ¼ë©´ ë¬¼ì–´ë´! ğŸ˜‰";
            } else if (userMessage.includes("ì‹œê°„")) {
                response = "ì§€ê¸ˆ ì‹œê°„ì€ " + currentDate + "ì•¼. ë‚˜ë‘ë¦¬ë„ ê°™ì´ í™•ì¸í–ˆì–´! ë‹¤ë¥¸ ê±° í•„ìš”í•´? ğŸ˜‚";
            } else if (userMessage.includes("ë§Œë“¤ì–´")) {
                response = "ë‚˜ì²˜ëŸ¼ ì±—ì°½ ë§Œë“¤ê³  ì‹¶êµ¬ë‚˜! HTML, CSS, JavaScriptë¡œ ê°„ë‹¨íˆ í•  ìˆ˜ ìˆì–´. ê¸°ë³¸ í‹€ ì¤„ê¹Œ? ì•„ë‹ˆë©´ êµ¬ì²´ì ìœ¼ë¡œ ì•Œë ¤ì¤„ê¹Œ? ğŸ˜„";
            } else {
                const randomTips = [
                    "ìŒ, ë­˜ ë¬¼ì–´ë³¼ì§€ ëª¨ë¥´ê² ë„¤? ë‚˜ë‘ë¦¬ ì¶”ì²œ: ì˜¤ëŠ˜ ê¸°ë¶„ í’€ë ¤ê³  ìŒì•… ì–´ë•Œ? ğŸ¶",
                    "ìœ¼ìŒ, ê¶ê¸ˆí•œ ê±° ì—†ì–´? ë‚˜ë‘ë¦¬ê°€ ì¬ë¯¸ìˆëŠ” ì‚¬ì‹¤ ì•Œë ¤ì¤„ê¹Œ? ì„¸ê³„ì—ì„œ ê°€ì¥ ê¸´ ê°•ì€ ì•„ë§ˆì¡´ì´ì•¼! ğŸ˜Š",
                    "ì•„, ë­”ê°€ ë” ë¬¼ì–´ë³´ê³  ì‹¶ì„ ë•Œê¹Œì§€ ë‚˜ë‘ë¦¬ ê¸°ë‹¤ë¦´ê²Œ! í¸í•˜ê²Œ ë§í•´ì¤˜! ğŸ¤—"
                ];
                response = randomTips[Math.floor(Math.random() * randomTips.length)];
            }

            return response;
        }

        function displayMessage(message, font, size, color, sender) {
            let chatBox = document.getElementById("chatBox");
            let messageElement = document.createElement("div");
            messageElement.className = `message ${sender}`;

            let senderLabel = document.createElement("span");
            senderLabel.className = "sender-label";
            senderLabel.textContent = sender === "user" ? "ë‚˜" : "ë‘ë¦¬";
            messageElement.appendChild(senderLabel);

            let textElement = document.createElement("span");
            textElement.textContent = message;
            textElement.className = "message-text";
            textElement.style.fontFamily = font;
            textElement.style.fontSize = size;
            textElement.style.color = color;
            messageElement.appendChild(textElement);

            let buttonContainer = document.createElement("div");
            buttonContainer.className = "button-container";

            if (sender === "user") { // ì‚¬ìš©ìì˜ ë©”ì‹œì§€ë§Œ ìˆ˜ì •/ì‚­ì œ ê°€ëŠ¥
                let editButton = document.createElement("button");
                editButton.textContent = "ìˆ˜ì •";
                editButton.onclick = function() {
                    let newMessage = prompt("ìˆ˜ì •í•  ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”:", textElement.textContent);
                    if (newMessage !== null) {
                        textElement.textContent = newMessage;
                        saveMessages();
                    }
                };
                buttonContainer.appendChild(editButton);

                let deleteButton = document.createElement("button");
                deleteButton.textContent = "ì‚­ì œ";
                deleteButton.onclick = function() {
                    chatBox.removeChild(messageElement);
                    saveMessages();
                };
                buttonContainer.appendChild(deleteButton);
            }

            messageElement.appendChild(buttonContainer);
            chatBox.appendChild(messageElement);
            chatBox.scrollTop = chatBox.scrollHeight;
        }

        function toggleMode() {
            document.body.classList.toggle("dark-mode");
            let button = document.querySelector(".mode-toggle");
            if (document.body.classList.contains("dark-mode")) {
                button.textContent = "í™”ì´íŠ¸ ëª¨ë“œ";
            } else {
                button.textContent = "ë‹¤í¬ ëª¨ë“œ";
            }
        }

        // ì—”í„°í‚¤ë¡œ ë©”ì‹œì§€ ì „ì†¡
        document.getElementById("messageInput").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
                event.preventDefault();
                sendMessage();
            }
        });

        window.onload = loadMessages;
    </script>
</body>
</html>
